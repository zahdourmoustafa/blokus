<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title th:text="${'Jouer: ' + game.name} + ' - Blokus'"></title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      body {
        background-color: #f8f9fa;
        padding-top: 20px;
        padding-bottom: 50px;
      }
      .game-container {
        display: flex;
        flex-direction: column;
        height: calc(100vh - 100px);
      }
      .game-header {
        background-color: #fff;
        padding: 10px 20px;
        border-radius: 10px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .game-board {
        flex-grow: 1;
        background-color: #fff;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(20, 25px);
        grid-template-rows: repeat(20, 25px);
        gap: 1px;
        background-color: #e0e0e0;
        padding: 5px;
        border-radius: 5px;
      }
      .cell {
        width: 25px;
        height: 25px;
        background-color: #ffffff;
        border: 1px solid #e0e0e0;
        cursor: pointer;
      }
      .cell:hover {
        background-color: #f5f5f5;
      }
      .cell.blue {
        background-color: #2196f3;
      }
      .cell.red {
        background-color: #f44336;
      }
      .cell.green {
        background-color: #4caf50;
      }
      .cell.yellow {
        background-color: #ffeb3b;
      }

      .player-info {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
      }
      .player-card {
        padding: 10px;
        border-radius: 5px;
        min-width: 130px;
        text-align: center;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }
      .player-card.active {
        box-shadow: 0 0 0 3px #4caf50;
      }
      .player-blue {
        background-color: #e3f2fd;
        color: #0d47a1;
      }
      .player-red {
        background-color: #ffebee;
        color: #b71c1c;
      }
      .player-green {
        background-color: #e8f5e9;
        color: #1b5e20;
      }
      .player-yellow {
        background-color: #fffde7;
        color: #f57f17;
      }

      /* Placeholder pour les pièces disponibles */
      .pieces-container {
        width: 220px;
        background-color: #fff;
        border-radius: 10px;
        padding: 15px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-left: 20px;
      }
      .piece-placeholder {
        height: 40px;
        background-color: #f0f0f0;
        margin-bottom: 10px;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid">
      <div class="game-container">
        <!-- Game Header -->
        <div class="game-header">
          <div class="d-flex justify-content-between align-items-center">
            <h3 th:text="${game.name}"></h3>
            <div>
              <a
                th:href="@{/games/{id}(id=${game.id})}"
                class="btn btn-outline-secondary btn-sm"
              >
                <i class="fas fa-info-circle"></i> Détails
              </a>
              <a
                th:href="@{/games}"
                class="btn btn-outline-secondary btn-sm ms-2"
              >
                <i class="fas fa-list"></i> Liste des parties
              </a>
            </div>
          </div>

          <!-- Player Status Cards -->
          <div class="player-info mt-3">
            <div
              th:each="player : ${game.players}"
              th:class="${'player-card player-' + player.color.name().toLowerCase()}"
              th:classappend="${player.color.name() == 'BLUE' ? 'active' : ''}"
            >
              <div>
                <span class="fw-bold" th:text="${player.user.username}"></span>
                <span th:if="${player.bot}" class="badge bg-secondary ms-1"
                  >IA</span
                >
              </div>
              <div>
                <small>
                  <i class="fas fa-star"></i>
                  <span th:text="${player.score}">0</span>
                </small>
              </div>
            </div>
          </div>
        </div>

        <!-- Game Board Area -->
        <div class="d-flex">
          <!-- Main Board -->
          <div class="game-board">
            <div class="text-center">
              <div class="alert alert-info">
                <i class="fas fa-exclamation-circle me-2"></i>
                Plateau de jeu à implémenter dans la prochaine étape
              </div>

              <!-- Placeholder for the board grid -->
              <div class="grid mt-4">
                <div
                  th:each="row : ${#numbers.sequence(1, 20)}"
                  th:with="rowVal=${row}"
                >
                  <div
                    th:each="col : ${#numbers.sequence(1, 20)}"
                    class="cell"
                    th:attr="data-row=${rowVal}, data-col=${col}"
                  ></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Pieces Container (Right Side) -->
          <div class="pieces-container">
            <h5 class="mb-3">Mes pièces</h5>

            <!-- Placeholder for pieces -->
            <p class="text-muted small mb-3">
              Pièces disponibles à implémenter dans la prochaine étape
            </p>

            <div class="piece-placeholder"></div>
            <div class="piece-placeholder"></div>
            <div class="piece-placeholder"></div>
            <div class="piece-placeholder"></div>
            <div class="piece-placeholder"></div>
            <div class="piece-placeholder"></div>
            <div class="piece-placeholder"></div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Basic placeholder for future JavaScript implementation
      document.addEventListener("DOMContentLoaded", function () {
        console.log("Game board ready - implementation coming in next step");
      });
    </script>
  </body>
</html>
